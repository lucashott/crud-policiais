<div class="list-container">
    <div class="header">
      <h1>Policiais Cadastrados</h1>
  
      
      <mat-form-field class="search-field" appearance="outline">
        <mat-label>Buscar por CPF ou RG</mat-label>
        <input matInput [formControl]="searchControl" placeholder="Digite para buscar...">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
  
      <!-- O `routerLink` navega para a rota do formulário de cadastro -->
      <button mat-raised-button color="primary" routerLink="/policiais/novo">
        <mat-icon>add</mat-icon>
        Novo Cadastro
      </button>
    </div>
  
    
    <div *ngIf="policiais$ | async as policiais; else loading" class="cards-grid">
      
      <!-- 
        Se o array estiver vazio, mostra uma mensagem amigável.
      -->
      <div *ngIf="policiais.length === 0; else list" class="empty-state">
        <mat-icon>info</mat-icon>
        <p>Nenhum policial encontrado.</p>
        <p *ngIf="!searchControl.value">Clique em "Novo Cadastro" para começar.</p>
        <p *ngIf="searchControl.value">Tente um termo de busca diferente.</p>
      </div>
  
      <!-- 
        Se o array tiver dados, a diretiva *ngFor itera sobre ele.
      -->
      <ng-template #list>
        <mat-card *ngFor="let policial of policiais" class="policial-card">
          <mat-card-header>
            <mat-card-title>{{ policial.rg_civil }}</mat-card-title>
            <mat-card-subtitle>Matrícula: {{ policial.matricula }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p><strong>RG Militar:</strong> {{ policial.rg_militar }}</p>
            <p><strong>CPF:</strong> {{ policial.cpf }}</p>
            <p><strong>Nascimento:</strong> {{ policial.data_nascimento | date:'dd/MM/yyyy' }}</p>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button [routerLink]="['/policiais/editar', policial.id]">EDITAR</button>
            <button mat-button color="warn" (click)="excluir(policial.id!)">EXCLUIR</button>
          </mat-card-actions>
        </mat-card>
      </ng-template>
    </div>
  
    <!-- Template #loading: Exibido enquanto o Observable está sendo resolvido -->
    <ng-template #loading>
      <div class="loading-spinner">
        <mat-spinner></mat-spinner>
        <p>Carregando policiais...</p>
      </div>
    </ng-template>
  </div>
  